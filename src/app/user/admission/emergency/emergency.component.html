<div style="margin-top: 65px;">
    <app-bar [progress]="4"></app-bar>
</div>

<form class="border m-5" (ngSubmit)="onSubmit(f)" #f="ngForm">
    <div class="h2 text-center my-4" style="font-family: Arial, Helvetica, sans-serif; color: #1d3557;">
        Emergency Contacts</div>
    <div class="row mt-5 mb-4">
        <div class="col-md-2 offset-10 pl-5">
            <span style="font-size: 40px; cursor: pointer" (click)="addContact();" class="material-icons add-button">
                add_circle
            </span>

        </div>
    </div>
    <table class="table table-striped table-hover mr-5 ml-5 mb-5 mt-3"
        style="position: relative; left: 2.5%; width: 1250px;">
        <thead class="">
            <th scope="col" style="width: 5%;">#</th>
            <th scope="col" style="width: 15%;">Relationship</th>
            <th scope="col" style="width: 20%;">Full Name</th>
            <th scope="col" style="width: 15%;">Mobile</th>
            <th scope="col" style="width: 15%;">Home Number</th>
            <th scope="col" style="width: 5%;"></th>
        </thead>
        <tbody #tableBody>
            <tr *ngFor="let row of this.submission.emergencyRows; let i = index;">
                <ng-container [ngModelGroup]="'EmergencyContact'+row">
                    <td>
                        {{row+1}}
                    </td>
                    <td>
                        <input [patchTable]="this.submission.patch" [rowIndex]="row" class="form-control" type='text'
                            name="Relationship"
                            [(ngModel)]="this.submission.emergency[this.submission.emergencyRows.indexOf(row)].Relationship"
                            required>
                    </td>
                    <td>
                        <input [patchTable]="this.submission.patch" [rowIndex]="row" class="form-control" type='text'
                            name="FullName"
                            [(ngModel)]="this.submission.emergency[this.submission.emergencyRows.indexOf(row)].FullName"
                            required>
                    </td>
                    <td>
                        <input [patchTable]="this.submission.patch" [rowIndex]="row" class="form-control" type='text'
                            name="MobileNumber"
                            [(ngModel)]="this.submission.emergency[this.submission.emergencyRows.indexOf(row)].MobileNumber"
                            required>
                    </td>
                    <td>
                        <input [patchTable]="this.submission.patch" [rowIndex]="row" class="form-control" type='text'
                            name="HomeNumber"
                            [(ngModel)]="this.submission.emergency[this.submission.emergencyRows.indexOf(row)].HomeNumber"
                            required>
                    </td>
                    <td><button class="btn" type="button" (click)="deleteContact(row)"><i class="material-icons"
                                style="font-size: 20px;">delete</i></button></td>
                </ng-container>
            </tr>
        </tbody>
    </table>
    <div class="row mx-3 my-5">
        <div class="col-md-4">
            <button class="btn btn-outline-primary" type="button" (click)="onBack()">Back</button>
        </div>
        <div class="col-md-4 offset-md-4 ">
            <button class="btn btn-primary" type="submit" style="position: absolute; right: 5%;"
                [disabled]="!f.valid">Next</button>
        </div>
    </div>
</form>